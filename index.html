
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>TADY - Vytvo≈ô si sv≈Øj svƒõt</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; background: #000; }
        .overlay { position: absolute; inset: 0; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; color: white; }
        .glass-box { background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(15px); border: 1px solid #00f2ff; border-radius: 25px; padding: 30px; width: 100%; max-width: 350px; box-shadow: 0 0 30px rgba(0, 242, 255, 0.2); }
        h1 { color: #00f2ff; margin: 0 0 10px 0; font-size: 32px; letter-spacing: 2px; }
        .type-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; }
        .type-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(0,242,255,0.3); color: white; padding: 10px; border-radius: 12px; cursor: pointer; font-size: 14px; }
        .type-btn.active { background: #00f2ff; color: black; border-color: #00f2ff; font-weight: bold; }
        input, textarea { width: 100%; background: #111; border: 1px solid #333; border-radius: 10px; padding: 12px; color: white; margin: 10px 0; box-sizing: border-box; }
        .btn-confirm { background: #00f2ff; color: #000; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; font-size: 16px; margin-top: 10px; cursor: pointer; }
        .crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40px; height: 40px; border: 2px solid #00f2ff; border-radius: 50%; z-index: 50; pointer-events: none; }
        #ar-controls { position: absolute; bottom: 30px; width: 100%; display: none; justify-content: center; z-index: 150; }
    </style>
</head>
<body>

    <div class="crosshair" id="cross" style="display:none;"></div>

    <div class="overlay" id="ui-main">
        <div class="glass-box">
            <h1>TADY</h1>
            <p style="font-size:13px; opacity:0.7;">Co chcete na toto m√≠sto um√≠stit?</p>
            
            <div class="type-selector">
                <button class="type-btn active" onclick="setType('Podpis', this)">üñäÔ∏è Podpis</button>
                <button class="type-btn" onclick="setType('Vzkaz', this)">üí¨ Vzkaz</button>
                <button class="type-btn" onclick="setType('Menu', this)">üç¥ Menu</button>
                <button class="type-btn" onclick="setType('Reklama', this)">üöÄ Reklama</button>
            </div>

            <input type="text" id="jmeno" placeholder="Va≈°e jm√©no / N√°zev">
            <textarea id="vzkaz" rows="3" placeholder="Text vzkazu..."></textarea>
            
            <button class="btn-confirm" onclick="startPlacement()">POKRAƒåOVAT (500 Kƒç)</button>
        </div>
    </div>

    <div class="overlay" id="ui-payment" style="display:none;">
        <div class="glass-box">
            <h2 style="color:#00f2ff;">Aktivace</h2>
            <p>P≈ôeveƒète 500 Kƒç na Revolut:</p>
            <div style="background:#000; padding:15px; border-radius:12px; font-family:monospace; border:1px solid #00f2ff; margin-bottom:20px;">
                IBAN: LT533250082844018353<br>
                Zpr√°va: <span id="pay-msg"></span>
            </div>
            <button class="btn-confirm" onclick="showARControls()">JI≈Ω JSEM ZAPLATIL</button>
        </div>
    </div>

    <div id="ar-controls">
        <button class="btn-confirm" style="width:250px; box-shadow: 0 0 20px #00f2ff;" onclick="anchorNow()">üìç UKOTVIT NA M√çSTƒö</button>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
        <a-entity camera look-controls id="cam">
            <a-entity id="preview" position="0 0 -3" visible="false">
                <a-plane width="3" height="1.5" color="#000" opacity="0.8" material="transparent:true; shader:flat"></a-plane>
                <a-text id="preview-text" value="" align="center" color="#00f2ff" width="4" wrap-count="20" font="https://cdn.aframe.io/fonts/Exo2Bold.fnt"></a-text>
            </a-entity>
        </a-entity>
        <a-entity id="world"></a-entity>
    </a-scene>

    <script>
        let selectedType = 'Podpis';
        
        function setType(type, btn) {
            selectedType = type;
            document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function startPlacement() {
            const name = document.getElementById('jmeno').value;
            if(!name) return alert("Zadejte jm√©no.");
            document.getElementById('pay-msg').innerText = "TADY " + name;
            document.getElementById('ui-main').style.display = 'none';
            document.getElementById('ui-payment').style.display = 'block';
        }

        function showARControls() {
            document.getElementById('ui-payment').style.display = 'none';
            document.getElementById('cross').style.display = 'block';
            document.getElementById('ar-controls').style.display = 'flex';
            
            // Nastaven√≠ textu do n√°hledu
            const name = document.getElementById('jmeno').value;
            const text = document.getElementById('vzkaz').value;
            document.getElementById('preview-text').setAttribute('value', `${selectedType.toUpperCase()}\n${name}\n${text}`);
            document.getElementById('preview').setAttribute('visible', 'true');
        }

        function anchorNow() {
            const world = document.getElementById('world');
            const cam = document.getElementById('cam');
            
            // V√Ωpoƒçet pozice v prostoru (3 metry p≈ôed kamerou)
            const pos = new THREE.Vector3(0, 0, -3);
            pos.applyQuaternion(cam.object3D.quaternion);
            pos.add(cam.object3D.position);

            const anchor = document.createElement('a-entity');
            anchor.setAttribute('position', `${pos.x} ${pos.y} ${pos.z}`);
            anchor.setAttribute('rotation', `0 ${cam.getAttribute('rotation').y} 0`);
            
            const content = document.getElementById('preview-text').getAttribute('value');
            
            anchor.innerHTML = `
                <a-plane width="3.2" height="1.8" color="#000" opacity="0.9" material="shader:flat"></a-plane>
                <a-text value="${content}" align="center" color="#00f2ff" width="4.5" wrap-count="18"></a-text>
                <a-ring color="#00f2ff" radius-inner="0.1" radius-outer="0.15" position="0 -1.2 0" rotation="-90 0 0"></a-ring>
            `;

            world.appendChild(anchor);
            
            document.getElementById('preview').setAttribute('visible', 'false');
            document.getElementById('ar-controls').style.display = 'none';
            document.getElementById('cross').style.display = 'none';
            alert("Vzkaz byl trvale ukotven na tomto m√≠stƒõ!");
        }
    </script>
</body>
</html>
