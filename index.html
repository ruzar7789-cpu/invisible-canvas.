<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Invisible Canes - Tracker</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #121212; color: white; }
        button { padding: 20px; font-size: 1.2rem; cursor: pointer; background: #00e676; border: none; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>Projekt Invisible Canes</h1>
    <button onclick="odeslatData()">Odeslat moji polohu</button>
    <p id="status"></p>

    <script>
        async function odeslatData() {
            const status = document.getElementById('status');
            status.innerText = "Získávám polohu...";

            navigator.geolocation.getCurrentPosition(async (pos) => {
                const data = {
                    lat: pos.coords.latitude,
                    lng: pos.coords.longitude,
                    content: "Záznam z aplikace",
                    media: ""
                };

                try {
                    const response = await fetch('/api/save-trace', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) {
                        status.innerText = "✅ Úspěšně uloženo do Neonu!";
                    } else {
                        status.innerText = "❌ Chyba serveru (500).";
                    }
                } catch (err) {
                    status.innerText = "❌ Selhalo připojení.";
                }
            });
        }
    </script>
</body>
</html>
