// --- Tuto část JavaScriptu jsem v kódu v2.1 zásadně rozšířil ---

// 1. NAČÍTÁNÍ DAT PŘI STARTU
let xp = parseInt(localStorage.getItem('tady_xp')) || 45;
let level = parseInt(localStorage.getItem('tady_lvl')) || 1;
let coins = parseInt(localStorage.getItem('tady_coins')) || 120;
let savedPosts = JSON.parse(localStorage.getItem('tady_posts')) || [];

// 2. FUNKCE PRO UKLÁDÁNÍ
function saveData() {
    localStorage.setItem('tady_xp', xp);
    localStorage.setItem('tady_lvl', level);
    localStorage.setItem('tady_coins', coins);
    localStorage.setItem('tady_posts', JSON.stringify(savedPosts));
}

// 3. AUTOMATICKÉ ZOBRAZENÍ ULOŽENÝCH PŘÍSPĚVKŮ
function loadFeed() {
    const list = document.getElementById('feed-list');
    savedPosts.forEach(post => {
        const card = document.createElement('div');
        card.className = post.type === 'sos' ? "card sos-card" : "card";
        card.innerHTML = `<b>${post.user}</b> ${post.type === 'sos' ? '<span class="badge badge-sos">SOS</span>' : ''}<br><small>${post.time}</small><p>${post.text}</p>`;
        list.insertBefore(card, list.firstChild);
    });
}
